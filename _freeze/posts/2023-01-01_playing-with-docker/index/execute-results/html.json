{
  "hash": "8d6f4e7f913689c433c6993a886672f1",
  "result": {
    "markdown": "---\ntitle: \"Playing with docker and the GitHub container registry\"\nauthor:\n  - name: Danielle Navarro\n    url: https://djnavarro.net\n    affiliation: I'm on smoko\n    affiliation-url: https://www.youtube.com/watch?v=j58V2vC9EPc\n    orcid: 0000-0001-7648-6578\ndescription: \"There is no reason for this.\"\ndate: \"2023-01-01\"\ncategories: [Linux, R, Docker]\nimage: \"containers.jpg\"\n---\n\n\n<!-- image credit: \n  Teng Yuhong\n  https://unsplash.com/photos/qMehmIyaXvY\n-->\n\n<!--------------- my typical setup ----------------->\n\n\n\n\n\n<!--------------- post begins here ----------------->\n\n\nThe docker reference documentation:\nhttps://docs.docker.com/reference/\n\nGiving docker sudo privileges:\nhttps://docs.docker.com/engine/install/linux-postinstall/\n\nThe rocker project by Carl Boettiger, Dirk Eddelbuettel, Noam Ross, and Shima Tatsuya:\nhttps://rocker-project.org/\n\nThe rocker project repositories:\nhttps://github.com/rocker-org/rocker\n\nBlog post by Colin Fay: \nhttps://colinfay.me/docker-r-reproducibility/\n\nSlides by Noam Ross:\nhttps://github.com/noamross/nyhackr-docker-talk\n\nDocker for beginners:\nhttps://docker-curriculum.com/\n\nWorking with GitHub Container Registry:\nhttps://docs.github.com/en/packages/working-with-a-github-packages-registry/working-with-the-container-registry\n\nCreate a github PAT with only the scopes we need:\n\n- `read:packages` scope to download container images and read metadata.\n- `write:packages` scope to download and upload container images and read and write metadata.\n- `delete:packages` scope to delete container images.\n\n\n```\nexport CR_PAT=ghp_xxxxxxxxxxxxxxxxxxxxxxxxxxxxx\n```\n\nLogin, badly:\n\n```\necho $CR_PAT | docker login ghcr.io -u djnavarro --password-stdin\n```\n\nThis throws a warning because I haven't configured a credential helper for Docker. That's on my to-do list. Even in the context of \"learning to use Docker\" I feel uncomfortable about this.\n\nBuild the image with the appropriate tag:\n\n```\ndocker build -t ghcr.io/djnavarro/arch-r-base:version1 .\n```\n\nPush the image to the GitHub container registry:\n\n```\ndocker push ghcr.io/djnavarro/arch-r-base:version1\n```\n\nIt looks like you can configure GitHub Actions workflows so that pushing changes to the source repo will trigger a docker build in the container registry. That seems like a nice feature and one I would want to use if I were using this for anything more than \"teaching myself Docker\".\n\n\nThe workflow for my simple script:\n\n```\ndocker build -t systemcheck .\ndocker run systemcheck\n```\n\n\n<!--------------- appendices go here ----------------->\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}