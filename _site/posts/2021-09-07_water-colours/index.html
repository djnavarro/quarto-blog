<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.353">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Danielle Navarro">
<meta name="dcterms.date" content="2021-09-07">
<meta name="description" content="An essay and tutorial covering a few useful art techniques in R">

<title>Notes from a data witch - Art, jasmines, and the water colours</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>
<style>

      .quarto-title-block .quarto-title-banner {
        background: #eeeeee;
      }
</style>


<link rel="stylesheet" href="../../styles.css">
<link rel="stylesheet" href="strapless.css">
<meta property="og:title" content="Notes from a data witch - Art, jasmines, and the water colours">
<meta property="og:description" content="An essay and tutorial covering a few useful art techniques in R">
<meta property="og:image" content="https://blog.djnavarro.net/posts/2021-09-07_water-colours/jasmine-recollected.png">
<meta property="og:site-name" content="Notes from a data witch">
<meta property="og:image:height" content="768">
<meta property="og:image:width" content="1248">
<meta property="og:image:alt" content="Flowing generative art that looks a little like jasmine flowers">
<meta name="twitter:title" content="Notes from a data witch - Art, jasmines, and the water colours">
<meta name="twitter:description" content="An essay and tutorial covering a few useful art techniques in R">
<meta name="twitter:image" content="https://blog.djnavarro.net/posts/2021-09-07_water-colours/jasmine-recollected.png">
<meta name="twitter:creator" content="@djnavarro">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image-height" content="768">
<meta name="twitter:image-width" content="1248">
<meta name="twitter:image:alt" content="Flowing generative art that looks a little like jasmine flowers">
</head>

<body class="floating nav-fixed slimcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../index.html" rel="" target="">
 <span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../index.xml" rel="" target="">
 <span class="menu-text">RSS</span></a>
  </li>  
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-sites" role="button" data-bs-toggle="dropdown" aria-expanded="false" rel="" target="">
 <span class="menu-text">Sites</span>
    </a>
    <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="nav-menu-sites">    
        <li>
    <a class="dropdown-item" href="https://djnavarro.net" rel="" target="">
 <span class="dropdown-text">Homepage</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="https://blog.djnavarro.net" rel="" target="">
 <span class="dropdown-text">Data science blog</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="https://art.djnavarro.net" rel="" target="">
 <span class="dropdown-text">Generative art</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="https://papers.djnavarro.net" rel="" target="">
 <span class="dropdown-text">Academic papers</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="https://djnavarro.net/sites" rel="" target="">
 <span class="dropdown-text">More…</span></a>
  </li>  
    </ul>
  </li>
</ul>
            <div class="quarto-navbar-tools">
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default toc-left page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">Art, jasmines, and the water colours</h1>
                  <div>
        <div class="description">
          <p>An essay and tutorial covering a few useful art techniques in R</p>
        </div>
      </div>
                          <div class="quarto-categories">
                <div class="quarto-category">Art</div>
                <div class="quarto-category">R</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Author</div>
      <div class="quarto-title-meta-contents">
               <p><a href="https://djnavarro.net">Danielle Navarro</a> <a href="https://orcid.org/0000-0001-7648-6578" class="quarto-title-author-orcid"> <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo1N0NEMjA4MDI1MjA2ODExOTk0QzkzNTEzRjZEQTg1NyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDozM0NDOEJGNEZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDozM0NDOEJGM0ZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1IE1hY2ludG9zaCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkZDN0YxMTc0MDcyMDY4MTE5NUZFRDc5MUM2MUUwNEREIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjU3Q0QyMDgwMjUyMDY4MTE5OTRDOTM1MTNGNkRBODU3Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+84NovQAAAR1JREFUeNpiZEADy85ZJgCpeCB2QJM6AMQLo4yOL0AWZETSqACk1gOxAQN+cAGIA4EGPQBxmJA0nwdpjjQ8xqArmczw5tMHXAaALDgP1QMxAGqzAAPxQACqh4ER6uf5MBlkm0X4EGayMfMw/Pr7Bd2gRBZogMFBrv01hisv5jLsv9nLAPIOMnjy8RDDyYctyAbFM2EJbRQw+aAWw/LzVgx7b+cwCHKqMhjJFCBLOzAR6+lXX84xnHjYyqAo5IUizkRCwIENQQckGSDGY4TVgAPEaraQr2a4/24bSuoExcJCfAEJihXkWDj3ZAKy9EJGaEo8T0QSxkjSwORsCAuDQCD+QILmD1A9kECEZgxDaEZhICIzGcIyEyOl2RkgwAAhkmC+eAm0TAAAAABJRU5ErkJggg=="></a></p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">September 7, 2021</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal sidebar-navigation floating overflow-auto">
    <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#prelude" id="toc-prelude" class="nav-link active" data-scroll-target="#prelude">Prelude</a></li>
  <li><a href="#the-water-colours-repository" id="toc-the-water-colours-repository" class="nav-link" data-scroll-target="#the-water-colours-repository">The water colours repository</a>
  <ul class="collapse">
  <li><a href="#why-use-version-control-here" id="toc-why-use-version-control-here" class="nav-link" data-scroll-target="#why-use-version-control-here">Why use version control here?</a></li>
  <li><a href="#the-manifest-file" id="toc-the-manifest-file" class="nav-link" data-scroll-target="#the-manifest-file">The manifest file</a></li>
  <li><a href="#previewing-the-artwork" id="toc-previewing-the-artwork" class="nav-link" data-scroll-target="#previewing-the-artwork">Previewing the artwork</a></li>
  </ul></li>
  <li><a href="#dependencies" id="toc-dependencies" class="nav-link" data-scroll-target="#dependencies">Dependencies</a></li>
  <li><a href="#art-from-image-processing" id="toc-art-from-image-processing" class="nav-link" data-scroll-target="#art-from-image-processing">Art from image processing</a>
  <ul class="collapse">
  <li><a href="#finding-the-image-file" id="toc-finding-the-image-file" class="nav-link" data-scroll-target="#finding-the-image-file">Finding the image file</a></li>
  <li><a href="#importing-the-image" id="toc-importing-the-image" class="nav-link" data-scroll-target="#importing-the-image">Importing the image</a></li>
  <li><a href="#converting-the-image-to-data" id="toc-converting-the-image-to-data" class="nav-link" data-scroll-target="#converting-the-image-to-data">Converting the image to data</a></li>
  <li><a href="#art-from-data-visualisation" id="toc-art-from-data-visualisation" class="nav-link" data-scroll-target="#art-from-data-visualisation">Art from data visualisation</a></li>
  <li><a href="#extracting-the-colour-channels" id="toc-extracting-the-colour-channels" class="nav-link" data-scroll-target="#extracting-the-colour-channels">Extracting the colour channels</a></li>
  <li><a href="#art-from-channel-manipulation" id="toc-art-from-channel-manipulation" class="nav-link" data-scroll-target="#art-from-channel-manipulation">Art from channel manipulation</a></li>
  </ul></li>
  <li><a href="#intermission" id="toc-intermission" class="nav-link" data-scroll-target="#intermission">Intermission</a></li>
  <li><a href="#art-from-noise-generators" id="toc-art-from-noise-generators" class="nav-link" data-scroll-target="#art-from-noise-generators">Art from noise generators</a>
  <ul class="collapse">
  <li><a href="#multidimensional-noise-generation" id="toc-multidimensional-noise-generation" class="nav-link" data-scroll-target="#multidimensional-noise-generation">Multidimensional noise generation</a></li>
  <li><a href="#art-from-the-noise" id="toc-art-from-the-noise" class="nav-link" data-scroll-target="#art-from-the-noise">Art from the noise</a></li>
  <li><a href="#accumulating-art-with-purrr" id="toc-accumulating-art-with-purrr" class="nav-link" data-scroll-target="#accumulating-art-with-purrr">Accumulating art with purrr</a></li>
  </ul></li>
  <li><a href="#assembling-the-parts" id="toc-assembling-the-parts" class="nav-link" data-scroll-target="#assembling-the-parts">Assembling the parts</a>
  <ul class="collapse">
  <li><a href="#adding-noise-to-jasmines-coordinates" id="toc-adding-noise-to-jasmines-coordinates" class="nav-link" data-scroll-target="#adding-noise-to-jasmines-coordinates">Adding noise to jasmines coordinates</a></li>
  <li><a href="#joining-the-noise-with-jasmine-colours" id="toc-joining-the-noise-with-jasmine-colours" class="nav-link" data-scroll-target="#joining-the-noise-with-jasmine-colours">Joining the noise with jasmine colours</a></li>
  <li><a href="#the-last-chapter" id="toc-the-last-chapter" class="nav-link" data-scroll-target="#the-last-chapter">The last chapter</a></li>
  </ul></li>
  <li><a href="#epilogue" id="toc-epilogue" class="nav-link" data-scroll-target="#epilogue">Epilogue</a></li>
  </ul>
</nav>
</nav>
<div id="quarto-sidebar-glass" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
    </div>
<!-- main -->
<main class="content quarto-banner-title-block page-columns page-full" id="quarto-document-content">




<!--------------- setup ----------------->
<!--------------- post ----------------->
<section id="prelude" class="level2">
<h2 class="anchored" data-anchor-id="prelude">Prelude</h2>
<p>In recent weeks I’ve been posting generative art from the <a href="https://art.djnavarro.net/gallery/water-colours/">Water Colours</a> series on twitter. The series has been popular, prompting requests that I sell prints, mint NFTs, or write a tutorial showing how they are made. For personal reasons I didn’t want to commercialise this series. Instead, I chose to make the pieces freely available under a CC0 public domain licence and asked people to donate to a <a href="https://au.gofundme.com/f/data-science-art-to-support-a-womens-refuge">gofundme</a> I set up for a charitable organisation I care about (the <a href="https://www.lousplace.com.au/">Lou’s Place</a> women’s refuge here in Sydney). I’m not going to discuss the personal story behind this series, but it does matter. As I’ve mentioned <a href="../../posts/2021-07-08_generative-art-in-r/">previously</a>, the art I make is inherently tied to moods. It is emotional in nature. In hindsight it is easy enough to describe how the system is implemented but this perspective is misleading. Although a clean and unemotional description of the code is useful for explanatory purposes, the actual <em>process</em> of creating the system is deeply tied to my life, my history, and my subjective experience. Those details are inextricably bound to the system. A friend described it better than I ever could:</p>
<blockquote class="blockquote">
<p>The computer doesn’t make this art any more than a camera makes a photograph; art is always intimate (<a href="https://twitter.com/justanotheramy/status/1432916731794579460">Amy Patterson</a>)</p>
</blockquote>
<p>In this post I’ll describe the mechanistic processes involved in creating these pieces, but this is woefully inadequate as a description of the artistic process as a whole. The optical mechanics of a camera do not circumscribe the work of a skilled photographer. So it goes with generative art. The code describes the mechanics; it does not describe the art. There is a deeply personal story underneath these pieces (one that I won’t tell here), and I would no more mint an NFT from that story than I would sell a piece of my soul to a collector.</p>
</section>
<section id="the-water-colours-repository" class="level2 page-columns page-full">
<h2 class="anchored" data-anchor-id="the-water-colours-repository">The water colours repository</h2>
<section id="why-use-version-control-here" class="level3">
<h3 class="anchored" data-anchor-id="why-use-version-control-here">Why use version control here?</h3>
<p>When I started making generative art I didn’t think much about archiving my art or keeping it organised. I liked making pretty things, and that was as far as my thought process went. I didn’t place the code under version control, and I stored everything in my Dropbox folder. There’s nothing wrong with that: some things don’t belong on GitHub. During the development phase of any art project that’s still what I do, and I’m perfectly happy with it.</p>
<p>Things become a little trickier when you want to share the art. My <a href="https://art.djnavarro.net">art website</a> is hosted on GitHub pages, and so my initial approach was to keep the art in the website repository. <em>Huuuuge mistake.</em> Sometimes the image files can be quite large and sometimes a series contains a large number of images. By the time I’d reached 40+ series, Hugo took a very long time to build the site (several minutes), and GitHub took even longer to deploy it (over half an hour).</p>
<p>Eventually I decided it made more sense to have one repository per series. Each one uses the “series-” prefix to remind me it’s an art repo. I don’t use these repositories during development: they exist solely to snapshot the release. For example, the <a href="https://github.com/djnavarro/series-water-colours">series-water-colours</a> repository isn’t going to be updated regularly, it’s really just an archive combined with a “docs” folder that is used to host a minimal GitHub Pages site that makes the images public. It’s convenient for my purposes because my art website doesn’t have to host any of the images: all it does is hotlink to the images that are exposed via the series repo.</p>
<p>It may seem surprising that I’ve used GitHub for this. Image files aren’t exactly well suited to version control, but it’s not like they’re going to be updated. Plus, there are a lot of advantages. I can explicitly include licencing information in the repository, I can release source code (when I want to), and I can include a readme file for anyone who wants to use it.</p>
</section>
<section id="the-manifest-file" class="level3 page-columns page-full">
<h3 class="anchored" data-anchor-id="the-manifest-file">The manifest file</h3>
<p>One nice feature of doing things this way is that it has encouraged me to include a <a href="&quot;https://djnavarro.net/series-water-colours/manifest.csv&quot;">manifest file</a>. Because the image files belong to a completely different repository to the website, I need a way to automatically inspect the image repository and construct the links I need (because I’m waaaaaay too lazy to add the links by hand). That’s the primary function of the manifest. The manifest.csv file is a plain csv file with one row per image, and one column for each piece of metadata I want to retain about the images. It might seem like organisational overkill to be this precise about the art, but I’m starting to realise that if I don’t have a proper system in place I’ll forget minor details like <em>“what the piece is called”</em> or <em>“when I made it”</em>. That seems bad :-)</p>
<p>I can use <code>readr::read_csv()</code> to download the manifest and do a little data wrangling to organise it into a format that is handy to me right now:</p>

<div class="no-row-height column-margin column-container"><div class="">
<p>The data wrangling code is <a href="https://github.com/djnavarro/quarto-blog/blob/master/posts/2021-09-07_water-colours/index.qmd#L71-L85">here</a></p>
</div></div><div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>manifest</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 20 × 9
   series      sys_id img_id short_name    format long_name date       path_2000
   &lt;chr&gt;       &lt;chr&gt;  &lt;chr&gt;  &lt;chr&gt;         &lt;chr&gt;  &lt;chr&gt;     &lt;date&gt;     &lt;chr&gt;    
 1 watercolour sys02  img34  teacup-ocean  jpg    Ocean in… 2021-07-31 https://…
 2 watercolour sys02  img31  incursions    jpg    Incursio… 2021-08-14 https://…
 3 watercolour sys02  img32  percolate     jpg    Percolate 2021-08-21 https://…
 4 watercolour sys02  img37  gentle-desce… jpg    Gentle D… 2021-08-21 https://…
 5 watercolour sys02  img41  stormy-seas   jpg    Stormy S… 2021-08-22 https://…
 6 watercolour sys02  img42  turmeric      jpg    Turmeric… 2021-08-24 https://…
 7 watercolour sys02  img43  torn-and-fra… jpg    Torn and… 2021-08-24 https://…
 8 watercolour sys02  img47  inferno       jpg    Seventh … 2021-08-27 https://…
 9 watercolour sys02  img48  storm-cell    jpg    Storm Ce… 2021-08-27 https://…
10 watercolour sys02  img49  tonal-earth   jpg    Tonal Ea… 2021-08-29 https://…
11 watercolour sys02  img50  cold-front    jpg    Cold Fro… 2021-08-29 https://…
12 watercolour sys02  img51  kintsugi-dre… jpg    Kintsugi… 2021-08-29 https://…
13 watercolour sys02  img53  departure     jpg    Departure 2021-08-29 https://…
14 watercolour sys02  img54  echo          jpg    Echo      2021-08-30 https://…
15 watercolour sys02  img57  portal        jpg    Portal    2021-08-31 https://…
16 watercolour sys02  img60  salt-stone-s… jpg    Gods of … 2021-08-31 https://…
17 watercolour sys02  img61  amanecer-de-… jpg    El Últim… 2021-09-01 https://…
18 watercolour sys02  img65  plume         jpg    Plume     2021-09-02 https://…
19 watercolour sys02  img67  woodland-spi… jpg    Woodland… 2021-09-02 https://…
20 watercolour sys02  img68  below-the-ho… jpg    Below th… 2021-09-03 https://…
# ℹ 1 more variable: path_500 &lt;chr&gt;</code></pre>
</div>
</div>
</section>
<section id="previewing-the-artwork" class="level3">
<h3 class="anchored" data-anchor-id="previewing-the-artwork">Previewing the artwork</h3>
<p>More to the point, the <code>manifest</code> data frame is nicely suited for use with the <a href="https://bs4cards.djnavarro.net/">bs4cards</a> package, so I can display some of the pieces in a neat and tidy thumbnail grid. Here are the first eight pieces from the series, arranged by date of creation:</p>
<div class="cell" data-hash="index_cache/html/water-colour-cards_f92e1b6fa1710ddd3daea13365b68307">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>manifest[<span class="dv">1</span><span class="sc">:</span><span class="dv">8</span>, ] <span class="sc">%&gt;%</span> </span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>  bs4cards<span class="sc">::</span><span class="fu">cards</span>(</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">image =</span> path_500,</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">link =</span> path_2000,</span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> long_name,</span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">spacing =</span> <span class="dv">3</span>,</span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">width =</span> <span class="dv">2</span></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>  )  </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<div class="row p-0 row-cols-1 row-cols-sm-2 row-cols-md-3 row-cols-lg-4" style="margin-left: -.4rem; margin-right: -.4rem; margin-top: 1rem; margin-bottom: 1rem; ">
<div class="card bg-transparent m-0 border-0 collapse.show bs4cards-blahblahblah " style="padding: .4rem ; border-width: 0; border-radius: .6rem .6rem .6rem .6rem ;">
<a href="https://djnavarro.net/series-water-colours/2000/watercolour_sys02_img34_teacup-ocean.jpg" style="color: inherit;">
<img src="https://djnavarro.net/series-water-colours/500/watercolour_sys02_img34_teacup-ocean.jpg" class="card-img-top" style="border-style:solid; border-color:inherits; border-width:1px 1px 0 1px; border-radius: .6rem .6rem 0 0 ;">
</a>
<div class="card-body justify-content-end m-0 p-0" style="visibility: visible; background-color: inherits; border-style:solid; border-color:inherits; border-width:1px; border-radius: 0 0 .6rem .6rem ;">
<a href="https://djnavarro.net/series-water-colours/2000/watercolour_sys02_img34_teacup-ocean.jpg">
<h5 class="card-title my-auto px-3 pt-3 pb-3 anchored">Ocean in a Teacup</h5>
</a>
</div>
</div>
<div class="card bg-transparent m-0 border-0 collapse.show bs4cards-blahblahblah " style="padding: .4rem ; border-width: 0; border-radius: .6rem .6rem .6rem .6rem ;">
<a href="https://djnavarro.net/series-water-colours/2000/watercolour_sys02_img31_incursions.jpg" style="color: inherit;">
<img src="https://djnavarro.net/series-water-colours/500/watercolour_sys02_img31_incursions.jpg" class="card-img-top" style="border-style:solid; border-color:inherits; border-width:1px 1px 0 1px; border-radius: .6rem .6rem 0 0 ;">
</a>
<div class="card-body justify-content-end m-0 p-0" style="visibility: visible; background-color: inherits; border-style:solid; border-color:inherits; border-width:1px; border-radius: 0 0 .6rem .6rem ;">
<a href="https://djnavarro.net/series-water-colours/2000/watercolour_sys02_img31_incursions.jpg">
<h5 class="card-title my-auto px-3 pt-3 pb-3 anchored">Incursions</h5>
</a>
</div>
</div>
<div class="card bg-transparent m-0 border-0 collapse.show bs4cards-blahblahblah " style="padding: .4rem ; border-width: 0; border-radius: .6rem .6rem .6rem .6rem ;">
<a href="https://djnavarro.net/series-water-colours/2000/watercolour_sys02_img32_percolate.jpg" style="color: inherit;">
<img src="https://djnavarro.net/series-water-colours/500/watercolour_sys02_img32_percolate.jpg" class="card-img-top" style="border-style:solid; border-color:inherits; border-width:1px 1px 0 1px; border-radius: .6rem .6rem 0 0 ;">
</a>
<div class="card-body justify-content-end m-0 p-0" style="visibility: visible; background-color: inherits; border-style:solid; border-color:inherits; border-width:1px; border-radius: 0 0 .6rem .6rem ;">
<a href="https://djnavarro.net/series-water-colours/2000/watercolour_sys02_img32_percolate.jpg">
<h5 class="card-title my-auto px-3 pt-3 pb-3 anchored">Percolate</h5>
</a>
</div>
</div>
<div class="card bg-transparent m-0 border-0 collapse.show bs4cards-blahblahblah " style="padding: .4rem ; border-width: 0; border-radius: .6rem .6rem .6rem .6rem ;">
<a href="https://djnavarro.net/series-water-colours/2000/watercolour_sys02_img37_gentle-descent.jpg" style="color: inherit;">
<img src="https://djnavarro.net/series-water-colours/500/watercolour_sys02_img37_gentle-descent.jpg" class="card-img-top" style="border-style:solid; border-color:inherits; border-width:1px 1px 0 1px; border-radius: .6rem .6rem 0 0 ;">
</a>
<div class="card-body justify-content-end m-0 p-0" style="visibility: visible; background-color: inherits; border-style:solid; border-color:inherits; border-width:1px; border-radius: 0 0 .6rem .6rem ;">
<a href="https://djnavarro.net/series-water-colours/2000/watercolour_sys02_img37_gentle-descent.jpg">
<h5 class="card-title my-auto px-3 pt-3 pb-3 anchored">Gentle Descent</h5>
</a>
</div>
</div>
<div class="card bg-transparent m-0 border-0 collapse.show bs4cards-blahblahblah " style="padding: .4rem ; border-width: 0; border-radius: .6rem .6rem .6rem .6rem ;">
<a href="https://djnavarro.net/series-water-colours/2000/watercolour_sys02_img41_stormy-seas.jpg" style="color: inherit;">
<img src="https://djnavarro.net/series-water-colours/500/watercolour_sys02_img41_stormy-seas.jpg" class="card-img-top" style="border-style:solid; border-color:inherits; border-width:1px 1px 0 1px; border-radius: .6rem .6rem 0 0 ;">
</a>
<div class="card-body justify-content-end m-0 p-0" style="visibility: visible; background-color: inherits; border-style:solid; border-color:inherits; border-width:1px; border-radius: 0 0 .6rem .6rem ;">
<a href="https://djnavarro.net/series-water-colours/2000/watercolour_sys02_img41_stormy-seas.jpg">
<h5 class="card-title my-auto px-3 pt-3 pb-3 anchored">Stormy Seas</h5>
</a>
</div>
</div>
<div class="card bg-transparent m-0 border-0 collapse.show bs4cards-blahblahblah " style="padding: .4rem ; border-width: 0; border-radius: .6rem .6rem .6rem .6rem ;">
<a href="https://djnavarro.net/series-water-colours/2000/watercolour_sys02_img42_turmeric.jpg" style="color: inherit;">
<img src="https://djnavarro.net/series-water-colours/500/watercolour_sys02_img42_turmeric.jpg" class="card-img-top" style="border-style:solid; border-color:inherits; border-width:1px 1px 0 1px; border-radius: .6rem .6rem 0 0 ;">
</a>
<div class="card-body justify-content-end m-0 p-0" style="visibility: visible; background-color: inherits; border-style:solid; border-color:inherits; border-width:1px; border-radius: 0 0 .6rem .6rem ;">
<a href="https://djnavarro.net/series-water-colours/2000/watercolour_sys02_img42_turmeric.jpg">
<h5 class="card-title my-auto px-3 pt-3 pb-3 anchored">Turmeric Against Grey Tuesday</h5>
</a>
</div>
</div>
<div class="card bg-transparent m-0 border-0 collapse.show bs4cards-blahblahblah " style="padding: .4rem ; border-width: 0; border-radius: .6rem .6rem .6rem .6rem ;">
<a href="https://djnavarro.net/series-water-colours/2000/watercolour_sys02_img43_torn-and-frayed.jpg" style="color: inherit;">
<img src="https://djnavarro.net/series-water-colours/500/watercolour_sys02_img43_torn-and-frayed.jpg" class="card-img-top" style="border-style:solid; border-color:inherits; border-width:1px 1px 0 1px; border-radius: .6rem .6rem 0 0 ;">
</a>
<div class="card-body justify-content-end m-0 p-0" style="visibility: visible; background-color: inherits; border-style:solid; border-color:inherits; border-width:1px; border-radius: 0 0 .6rem .6rem ;">
<a href="https://djnavarro.net/series-water-colours/2000/watercolour_sys02_img43_torn-and-frayed.jpg">
<h5 class="card-title my-auto px-3 pt-3 pb-3 anchored">Torn and Frayed</h5>
</a>
</div>
</div>
<div class="card bg-transparent m-0 border-0 collapse.show bs4cards-blahblahblah " style="padding: .4rem ; border-width: 0; border-radius: .6rem .6rem .6rem .6rem ;">
<a href="https://djnavarro.net/series-water-colours/2000/watercolour_sys02_img47_inferno.jpg" style="color: inherit;">
<img src="https://djnavarro.net/series-water-colours/500/watercolour_sys02_img47_inferno.jpg" class="card-img-top" style="border-style:solid; border-color:inherits; border-width:1px 1px 0 1px; border-radius: .6rem .6rem 0 0 ;">
</a>
<div class="card-body justify-content-end m-0 p-0" style="visibility: visible; background-color: inherits; border-style:solid; border-color:inherits; border-width:1px; border-radius: 0 0 .6rem .6rem ;">
<a href="https://djnavarro.net/series-water-colours/2000/watercolour_sys02_img47_inferno.jpg">
<h5 class="card-title my-auto px-3 pt-3 pb-3 anchored">Seventh Circle</h5>
</a>
</div>
</div>
</div>
</div>
</div>
</div>
<p>Each thumbnail image links to a medium resolution (2000 x 2000 pixels) jpg version of the corresponding piece, if you’d like to see the images in a little more detail.</p>
</section>
</section>
<section id="dependencies" class="level2 page-columns page-full">
<h2 class="anchored" data-anchor-id="dependencies">Dependencies</h2>
<p>In the remainder of this post I’ll walk you through the process of creating pieces “in the style of” the water colours series. If you really want to, you can take a look at the <a href="https://github.com/djnavarro/series-water-colours/blob/master/source/watercolours_02.R">actual source</a>, but it may not be very helpful: the code is little opaque, poorly structured, and delegates a lot of the work to the <a href="https://github.com/cmarcum/halftoner">halftoner</a> and <a href="https://jasmines.djnavarro.net/">jasmines</a> packages, neither of which is on CRAN. To make it a little easier on you, I’ll build a new system in this post that adopts the same core ideas.</p>
<p>In this post I’ll assume you’re already familiar with data wrangling and visualisation with tidyverse tools. This is the subset of <a href="https://www.tidyverse.org/">tidyverse</a> packages that I have attached, and the code that follows relies on all these in some fashion:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(magrittr)</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readr)</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyr)</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tibble)</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(stringr)</span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(purrr)</span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>

<div class="no-row-height column-margin column-container"><div class="">
<p>The R environment is specified formally in the <a href="https://github.com/djnavarro/quarto-blog/tree/master/posts/2021-09-07_water-colours/renv.lock">lockfile</a>. It’s a story for another day, but for reproducibility purposes I have a separate <a href="https://rstudio.github.io/renv/">renv configuration</a> for every post</p>
</div></div><p>In addition to tidyverse and base R functions, I’ll use a few other packages as well. The <a href="https://docs.ropensci.org/magick/">magick</a>, <a href="https://github.com/rspatial/raster/">raster</a>, <a href="https://rprojroot.r-lib.org/">rprojroot</a>, <a href="https://fs.r-lib.org/">fs</a>, and <a href="https://ambient.data-imaginist.com/">ambient</a> packages are all used in making the art. Because functions from those packages may not be as familiar to everyone, I’ll namespace the calls to them in the same way I did with <code>bs4cards::cards()</code> previously. Hopefully that will make it easier to see which functions belong to one of those packages.</p>
</section>
<section id="art-from-image-processing" class="level2 page-columns page-full">
<h2 class="anchored" data-anchor-id="art-from-image-processing">Art from image processing</h2>
<section id="finding-the-image-file" class="level3 page-columns page-full">
<h3 class="anchored" data-anchor-id="finding-the-image-file">Finding the image file</h3>
<p>As in life, the place to start is knowing where you are.</p>
<p>This post is part of my blog, and I’ll need to make use of an image file called <code>"jasmine.jpg"</code> stored alongside my R markdown. First, I can use <a href="https://rprojroot.r-lib.org/">rprojroot</a> to find out where my blog is stored. I’ll do that by searching for a <code>"_quarto.yml"</code> file:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>blog <span class="ot">&lt;-</span> rprojroot<span class="sc">::</span><span class="fu">find_root</span>(<span class="st">"_quarto.yml"</span>)</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>blog</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "/home/danielle/GitHub/quarto-blog"</code></pre>
</div>
</div>
<p>I suspect that most people reading this would be more familiar with the <a href="https://here.r-lib.org/">here</a> package that provides a simplified interface to rprojroot and will automatically detect the .Rproj or .here file associated with your project. In fact, because the <code>here::here()</code> function is so convenient, it’s usually my preferred method for solving this problem. Sometimes, however, the additional flexibility provided by rprojroot is very useful. Some of my projects are comprised of partially independent sub-projects, each with a distinct root directory. That happens sometimes when blogging: there are contexts in which you might want to consider “the blog” to be the project, but other contexts in which “the post” might be the project. If you’re not careful this can lead to chaos (e.g., RStudio projects nested inside other RStudio projects), and I’ve found rprojroot very helpful in avoiding ambiguity in these situations.</p>
<p>Having chosen “the blog” as the root folder, the next step in orientation is to find the post folder. Because this is a <a href="https://rstudio.github.io/distill/">distill</a> blog, all my posts are stored in the <code>_posts</code> folder, and I’ve adopted a consistent <a href="https://slides.djnavarro.net/project-structure/">naming</a> <a href="https://speakerdeck.com/jennybc/how-to-name-files">convention</a> for organising the post folders. Every name begins with the post date in year-month-day format, followed by a human-readable “slug”:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>post <span class="ot">&lt;-</span> <span class="fu">paste</span>(params<span class="sc">$</span>date, params<span class="sc">$</span>slug, <span class="at">sep =</span> <span class="st">"_"</span>)</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>post</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "2021-09-07_water-colours"</code></pre>
</div>
</div>
<p>This allows me to construct the path to the image file:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>file <span class="ot">&lt;-</span> fs<span class="sc">::</span><span class="fu">path</span>(blog, <span class="st">"posts"</span>, post, <span class="st">"jasmine.jpg"</span>)</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>file</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>/home/danielle/GitHub/quarto-blog/posts/2021-09-07_water-colours/jasmine.jpg</code></pre>
</div>
</div>
<p>Here’s the image:</p>
<div class="cell">
<div class="cell-output-display">
<p><img src="jasmine.jpg" class="img-fluid" width="960"></p>
</div>
</div>

<div class="no-row-height column-margin column-container"><div class="">
<p>The photo has an emotional resonance to me: it dates back to 2011 and appeared on the cover of <a href="https://learningstatisticswithr.com">Learning Statistics with R</a>. Although 10 years separate the <em>Water Colours</em> series from the text and the photo, the two are linked by a shared connection to events from a decade ago</p>
</div></div></section>
<section id="importing-the-image" class="level3">
<h3 class="anchored" data-anchor-id="importing-the-image">Importing the image</h3>
<p>Our next step is to import the image into R at a suitable resolution. The original image size is 1000x600 pixels, which is a little more than we need. Here’s a simple <code>import_image()</code> function that does this:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>import_image <span class="ot">&lt;-</span> <span class="cf">function</span>(path, width, height) {</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>  geometry <span class="ot">&lt;-</span> <span class="fu">paste0</span>(width, <span class="st">"x"</span>, height) <span class="co"># e.g., "100x60"</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>  path <span class="sc">%&gt;%</span> </span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>    magick<span class="sc">::</span><span class="fu">image_read</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>    magick<span class="sc">::</span><span class="fu">image_scale</span>(geometry)</span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Internally, the work is being done by the fabulous <a href="https://docs.ropensci.org/magick/">magick</a> package that provides bindings to the <a href="https://imagemagick.org/">ImageMagick</a> library. In truth, it’s the ImageMagick library that is doing most the work here. R doesn’t load the complete image, it lets ImageMagick take care of that. Generally that’s a good thing for performance reasons (you don’t want to load large images into memory if you can avoid it), but in this case we’re going to work with the raw image data inside R.</p>
<p>This brings us to the next task…</p>
</section>
<section id="converting-the-image-to-data" class="level3 page-columns page-full">
<h3 class="anchored" data-anchor-id="converting-the-image-to-data">Converting the image to data</h3>
<p>Converting the image into a data structure we can use is a two step process. First, we create a matrix that represents the image in a format similar to the image itself. That’s the job of the <code>construct_matrix()</code> function below. It takes the <code>image</code> as input, and first coerces it to a raster object and then to a regular matrix: in the code below, the matrix is named <code>mat</code>, and the pixel on the i-th row and j-th column of the image is represented by the contents of <code>mat[i, j]</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>construct_matrix <span class="ot">&lt;-</span> <span class="cf">function</span>(image) {</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>  <span class="co"># read matrix</span></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>  mat <span class="ot">&lt;-</span> image <span class="sc">%&gt;%</span> </span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">as.raster</span>() <span class="sc">%&gt;%</span></span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">as.matrix</span>()</span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a>  <span class="co"># use the row and column names to represent co-ordinates</span></span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rownames</span>(mat) <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">"y"</span>, <span class="fu">nrow</span>(mat)<span class="sc">:</span><span class="dv">1</span>) <span class="co"># &lt;- flip y</span></span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">colnames</span>(mat) <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">"x"</span>, <span class="dv">1</span><span class="sc">:</span><span class="fu">ncol</span>(mat))</span>
<span id="cb12-11"><a href="#cb12-11" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb12-12"><a href="#cb12-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(mat)</span>
<span id="cb12-13"><a href="#cb12-13" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>A little care is needed when interpreting the rows of this matrix. When we think about graphs, the values on y-axis increase as we move our eyes upwards from the bottom, so our mental model has the small numbers at the bottom and the big numbers at the top. But that’s not the only mental model in play here. When we read a matrix or a table we don’t <em>look</em> at it, we <em>read</em> it - and we read from top to bottom. A numbered list, for example, has the smallest numbers at the top, and the numbers get bigger as we read down the list. Both of those mental models are sensible, but it’s hard to switch between them.</p>
<p>The tricky part here is that the raw image is encoded in “reading format”. It’s supposed to be read like a table or a list, so the indices increase as we read down the image. The image data returned by <code>construct_matrix()</code> is organised this format. However, when we draw pictures with ggplot2 later on, we’re going to need to switch to a “graph format” convention with the small numbers at the bottom. That’s the reason why the code above flips the order of the row names. Our next task will be to convert this (reading-formatted) matrix into a tidy tibble, and those row and column names will become become our (graph-formatted) x- and y-coordinates, so the row names need to be labelled in reverse order.</p>
<p>To transform the image matrix into a tidy tibble, I’ve written a handy <code>construct_tibble()</code> function:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>construct_tibble <span class="ot">&lt;-</span> <span class="cf">function</span>(mat) {</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>  <span class="co"># convert to tibble</span></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>  tbl <span class="ot">&lt;-</span> mat <span class="sc">%&gt;%</span></span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">as.data.frame</span>() <span class="sc">%&gt;%</span></span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">rownames_to_column</span>(<span class="st">"y"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">as_tibble</span>() </span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a>  <span class="co"># reshape</span></span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true" tabindex="-1"></a>  tbl <span class="ot">&lt;-</span> tbl <span class="sc">%&gt;%</span></span>
<span id="cb13-11"><a href="#cb13-11" aria-hidden="true" tabindex="-1"></a>    <span class="fu">pivot_longer</span>(</span>
<span id="cb13-12"><a href="#cb13-12" aria-hidden="true" tabindex="-1"></a>      <span class="at">cols =</span> <span class="fu">starts_with</span>(<span class="st">"x"</span>),</span>
<span id="cb13-13"><a href="#cb13-13" aria-hidden="true" tabindex="-1"></a>      <span class="at">names_to =</span> <span class="st">"x"</span>,</span>
<span id="cb13-14"><a href="#cb13-14" aria-hidden="true" tabindex="-1"></a>      <span class="at">values_to =</span> <span class="st">"shade"</span></span>
<span id="cb13-15"><a href="#cb13-15" aria-hidden="true" tabindex="-1"></a>    ) </span>
<span id="cb13-16"><a href="#cb13-16" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb13-17"><a href="#cb13-17" aria-hidden="true" tabindex="-1"></a>  <span class="co"># tidy</span></span>
<span id="cb13-18"><a href="#cb13-18" aria-hidden="true" tabindex="-1"></a>  tbl <span class="ot">&lt;-</span> tbl <span class="sc">%&gt;%</span></span>
<span id="cb13-19"><a href="#cb13-19" aria-hidden="true" tabindex="-1"></a>    <span class="fu">arrange</span>(x, y) <span class="sc">%&gt;%</span> </span>
<span id="cb13-20"><a href="#cb13-20" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(</span>
<span id="cb13-21"><a href="#cb13-21" aria-hidden="true" tabindex="-1"></a>      <span class="at">x =</span> x <span class="sc">%&gt;%</span> <span class="fu">str_remove_all</span>(<span class="st">"x"</span>) <span class="sc">%&gt;%</span> <span class="fu">as.numeric</span>(),</span>
<span id="cb13-22"><a href="#cb13-22" aria-hidden="true" tabindex="-1"></a>      <span class="at">y =</span> y <span class="sc">%&gt;%</span> <span class="fu">str_remove_all</span>(<span class="st">"y"</span>) <span class="sc">%&gt;%</span> <span class="fu">as.numeric</span>(),</span>
<span id="cb13-23"><a href="#cb13-23" aria-hidden="true" tabindex="-1"></a>      <span class="at">id =</span> <span class="fu">row_number</span>()</span>
<span id="cb13-24"><a href="#cb13-24" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb13-25"><a href="#cb13-25" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb13-26"><a href="#cb13-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(tbl)</span>
<span id="cb13-27"><a href="#cb13-27" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>The code has the following strucure:</p>
<ul>
<li><p>The first part of this code coerces the matrix to a plain data frame, then uses <code>rownames_to_columns()</code> to extract the row names before coercing it to a tibble. This step is necessary because tibbles don’t have row names, and we need those row names: our end goal is to have a variable <code>y</code> to store those co-ordinate values.</p></li>
<li><p>The second part of the code uses <code>pivot_longer()</code> to capture all the other variables (currently named <code>x1</code>, <code>x2</code>, etc) and pull them down into a single column that specifies the <code>x</code> co-ordinate. At this stage, the <code>tbl</code> tibble contains three variables: an <code>x</code> value, a <code>y</code> value, and a <code>shade</code> that contains the hex code for a colour.</p></li>
<li><p>The last step is to tidy up the values. After <code>pivot_longer()</code> does its job, the <code>x</code> variable contains strings like <code>"x1"</code>, <code>"x2"</code>, etc, but we’d prefer them to be actual numbers like <code>1</code>, <code>2</code>, etc. The same is true for the <code>y</code> variable. To fix this, the last part of the code does a tiny bit of string manipulation using <code>str_remove_all()</code> to get rid of the unwanted prefixes, and then coerces the result to a number.</p></li>
</ul>

<div class="no-row-height column-margin column-container"><div class="">
<p>The <code>names_prefix</code> argument to <code>pivot_longer()</code> can transform <code>x</code> without the third step, but I prefer the verbose form. I find it easier to read and it treats <code>x</code> and <code>y</code> the same</p>
</div></div><p>Taken together, the <code>import_image()</code>, <code>construct_matrix()</code>, and <code>construct_tibble()</code> functions provide us with everything we need to pull the data from the image file and wrangle it into a format that ggplot2 is expecting:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>jas <span class="ot">&lt;-</span> file <span class="sc">%&gt;%</span> </span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">import_image</span>(<span class="at">width =</span> <span class="dv">100</span>, <span class="at">height =</span> <span class="dv">60</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">construct_matrix</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">construct_tibble</span>()</span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a>jas</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6,000 × 4
       y     x shade        id
   &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;     &lt;int&gt;
 1     1     1 #838c70ff     1
 2    10     1 #3c3123ff     2
 3    11     1 #503d3dff     3
 4    12     1 #363126ff     4
 5    13     1 #443a30ff     5
 6    14     1 #8a6860ff     6
 7    15     1 #665859ff     7
 8    16     1 #5a5d51ff     8
 9    17     1 #535c4cff     9
10    18     1 #944b61ff    10
# ℹ 5,990 more rows</code></pre>
</div>
</div>
<p>A little unusually, the hex codes here are specified in RGBA format: the first two alphanumeric characters specify the hexadecimal code for the red level, the second two represent the green level (or “channel”), the third two are the blue channel, and the last two are the opacity level (the alpha channel). I’m going to ignore the alpha channel for this exercise though.</p>
<p>There’s one last thing to point out before turning to the fun art part. Notice that <code>jas</code> also contains an <code>id</code> column (added by the third part of the <code>construct_tibble()</code> function). It’s generally good practice to have an <code>id</code> column that uniquely identifies each row, and will turn out to be useful later when we need to join this data set with other data sets that we’ll generate.</p>
</section>
<section id="art-from-data-visualisation" class="level3">
<h3 class="anchored" data-anchor-id="art-from-data-visualisation">Art from data visualisation</h3>
<p>Let the art begin!</p>
<p>The first step is to define a helper function <code>ggplot_themed()</code> that provides a template that we’ll reuse in every plot. Mostly this involves preventing ggplot2 from doing things it wants to do. When we’re doing data visualisation it’s great that ggplot2 automatically provides things like “legends”, “axes”, and “scales” to map from data to visual aesthetics, but from an artistic perspective they’re just clutter. I don’t want to manually strip that out every time I make a plot, so it makes sense to have a function that gets rid of all those things:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>ggplot_themed <span class="ot">&lt;-</span> <span class="cf">function</span>(data) {</span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>  data <span class="sc">%&gt;%</span> </span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(x, y)) <span class="sc">+</span></span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">coord_equal</span>() <span class="sc">+</span> </span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_size_identity</span>() <span class="sc">+</span> </span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_colour_identity</span>() <span class="sc">+</span> </span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_fill_identity</span>() <span class="sc">+</span> </span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_void</span>() </span>
<span id="cb16-9"><a href="#cb16-9" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>This “template function” allows us to start with a clean slate, and it makes our subsequent coding task easier. The <code>x</code> and <code>y</code> aesthetics are already specified, ggplot2 won’t try to “interpret” our colours and sizes for us, and it won’t mess with the aspect ratio. In a sense, this function turns off the autopilot: we’re flying this thing manually…</p>
<p>There are many ways to plot the <code>jas</code> data in ggplot2. The least imaginative possibility is <code>geom_tile()</code>, which produces a pixellated version of the jasmines photo:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>jas <span class="sc">%&gt;%</span> </span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot_themed</span>() <span class="sc">+</span> </span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_tile</span>(<span class="fu">aes</span>(<span class="at">fill =</span> shade)) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="index_files/figure-html/jasmine-raster-image-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Of course, if you are like me you always forget to use the fill aesthetic. The muscle memory tells me to use the colour aesthetic, so I often end up drawing something where only the borders of the tiles are coloured:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>jas <span class="sc">%&gt;%</span> </span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot_themed</span>() <span class="sc">+</span> </span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_tile</span>(<span class="fu">aes</span>(<span class="at">colour =</span> shade)) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="index_files/figure-html/jasmine-raster-variant-image-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>It’s surprisingly pretty, and a cute demonstration of how good the visual system is at reconstructing images from low-quality input: remarkably, the jasmines are still perceptible despite the fact that most of the plot area is black. I didn’t end up pursuing this (yet!) but I think there’s a lot of artistic potential here. It might be worth playing with at a later date. In that sense generative art is a lot like any other kind of art (or, for that matter, science). It is as much about exploration and discovery as it is about technical prowess.</p>
<p>The path I did follow is based on <code>geom_point()</code>. Each pixel in the original image is plotted as a circular marker in the appropriate colour. Here’s the simplest version of this idea applied to the <code>jas</code> data:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>jas <span class="sc">%&gt;%</span> </span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot_themed</span>() <span class="sc">+</span> </span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">colour =</span> shade)) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="index_files/figure-html/jasmine-scatter-image-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>It’s simple, but I like it.</p>
</section>
<section id="extracting-the-colour-channels" class="level3">
<h3 class="anchored" data-anchor-id="extracting-the-colour-channels">Extracting the colour channels</h3>
<p>Up to this point we haven’t been manipulating the colours in any of the plots: the hex code in the <code>shade</code> variable is left intact. There’s no inherent reason we should limit ourselves to such boring visualisations. All we need to do is extract the different “colour channels” and start playing around.</p>
<p>It’s not too difficult to do this: base R provides the <code>col2rgb()</code> function that separates the hex code into red, green, blue channels, and represents each channel with integers between 0 and 255. It also provides the <code>rgb2hsv()</code> function that converts this RGB format into <a href="https://en.wikipedia.org/wiki/HSL_and_HSV">hue, saturation, and value</a> format, represented as numeric values between 0 and 1.</p>
<p>This technique is illustrated by the <code>extract_channels()</code> helper function shown below. It looks at the <code>shade</code> column in the data frame, and adds six new columns, one for each channel. I’m a sucker for variable names that are all the same length (often unwisely), and I’ve named them <code>red</code>, <code>grn</code>, <code>blu</code>, <code>hue</code>, <code>sat</code>, and <code>val</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>extract_channels <span class="ot">&lt;-</span> <span class="cf">function</span>(tbl) {</span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>  rgb <span class="ot">&lt;-</span> <span class="fu">with</span>(tbl, <span class="fu">col2rgb</span>(shade))</span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>  hsv <span class="ot">&lt;-</span> <span class="fu">rgb2hsv</span>(rgb)</span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>  tbl <span class="ot">&lt;-</span> tbl <span class="sc">%&gt;%</span> </span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(</span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a>      <span class="at">red =</span> rgb[<span class="dv">1</span>, ],</span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a>      <span class="at">grn =</span> rgb[<span class="dv">2</span>, ],</span>
<span id="cb20-8"><a href="#cb20-8" aria-hidden="true" tabindex="-1"></a>      <span class="at">blu =</span> rgb[<span class="dv">3</span>, ],</span>
<span id="cb20-9"><a href="#cb20-9" aria-hidden="true" tabindex="-1"></a>      <span class="at">hue =</span> hsv[<span class="dv">1</span>, ],</span>
<span id="cb20-10"><a href="#cb20-10" aria-hidden="true" tabindex="-1"></a>      <span class="at">sat =</span> hsv[<span class="dv">2</span>, ],</span>
<span id="cb20-11"><a href="#cb20-11" aria-hidden="true" tabindex="-1"></a>      <span class="at">val =</span> hsv[<span class="dv">3</span>, ]</span>
<span id="cb20-12"><a href="#cb20-12" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb20-13"><a href="#cb20-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(tbl)</span>
<span id="cb20-14"><a href="#cb20-14" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Here’s what that looks like applied to the <code>jas</code> data:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>jas <span class="ot">&lt;-</span> <span class="fu">extract_channels</span>(jas)</span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>jas</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6,000 × 10
       y     x shade        id   red   grn   blu    hue   sat   val
   &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;     &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
 1     1     1 #838c70ff     1   131   140   112 0.220  0.200 0.549
 2    10     1 #3c3123ff     2    60    49    35 0.0933 0.417 0.235
 3    11     1 #503d3dff     3    80    61    61 0      0.237 0.314
 4    12     1 #363126ff     4    54    49    38 0.115  0.296 0.212
 5    13     1 #443a30ff     5    68    58    48 0.0833 0.294 0.267
 6    14     1 #8a6860ff     6   138   104    96 0.0317 0.304 0.541
 7    15     1 #665859ff     7   102    88    89 0.988  0.137 0.4  
 8    16     1 #5a5d51ff     8    90    93    81 0.208  0.129 0.365
 9    17     1 #535c4cff     9    83    92    76 0.260  0.174 0.361
10    18     1 #944b61ff    10   148    75    97 0.950  0.493 0.580
# ℹ 5,990 more rows</code></pre>
</div>
</div>
<p>A whole new world of artistic possibilities has just emerged!</p>
</section>
<section id="art-from-channel-manipulation" class="level3 page-columns page-full">
<h3 class="anchored" data-anchor-id="art-from-channel-manipulation">Art from channel manipulation</h3>
<p>One way to use this representation is in <a href="https://en.wikipedia.org/wiki/Halftone">halftone images</a>. If you have a printer that contains only black ink, you can approximate shades of grey by using the size of each dot to represent how dark that pixel should be:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>map_size <span class="ot">&lt;-</span> <span class="cf">function</span>(x) {</span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>  ambient<span class="sc">::</span><span class="fu">normalise</span>(<span class="dv">1</span><span class="sc">-</span>x, <span class="at">to =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">2</span>))</span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a>jas <span class="sc">%&gt;%</span> </span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot_themed</span>() <span class="sc">+</span>  </span>
<span id="cb23-7"><a href="#cb23-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(</span>
<span id="cb23-8"><a href="#cb23-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">size =</span> <span class="fu">map_size</span>(val)),</span>
<span id="cb23-9"><a href="#cb23-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">colour =</span> <span class="st">"black"</span>, </span>
<span id="cb23-10"><a href="#cb23-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">show.legend =</span> <span class="cn">FALSE</span></span>
<span id="cb23-11"><a href="#cb23-11" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="index_files/figure-html/jasmine-halftone-image-1.png" class="img-fluid" width="672"></p>
</div>
</div>

<div class="no-row-height column-margin column-container"><div class="">
<p>In this code the <code>ambient::normalise()</code> function is used to rescale the input to fall within a specified range. Usually ggplot2 handles this automatically, but as I mentioned, we’ve turned off the autopilot…</p>
</div></div><p>For real world printers, this approach is very convenient because it allows us to construct any shade we like using only a few different colours of ink. In the halftone world shades of grey are merely blacks of different size, pinks are merely sizes of red (sort of), and so on.</p>
<p>But we’re not using real printers, and in any case the image above is not a very good example of a halftone format: I’m crudely mapping <code>1-val</code> to the size aesthetic, and that’s not actually the right way to do this (if you want to see this done properly, look at the <a href="https://github.com/cmarcum/halftoner">halftoner</a> package). The image above is “inspired by” the halftone concept, not the real thing. I’m okay with that, and abandoning the idea of fidelity opens up new possibilities. For example, there’s nothing stopping us retaining the original hue and saturation, while using dot size to represent the intensity value. That allows us to produce “halftonesque” images like this:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>jas <span class="sc">%&gt;%</span> </span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot_themed</span>() <span class="sc">+</span>  </span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(</span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">mapping =</span> <span class="fu">aes</span>(</span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a>      <span class="at">colour =</span> <span class="fu">hsv</span>(hue, sat, .<span class="dv">5</span>), </span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a>      <span class="at">size =</span> <span class="fu">map_size</span>(val)</span>
<span id="cb24-7"><a href="#cb24-7" aria-hidden="true" tabindex="-1"></a>    ), </span>
<span id="cb24-8"><a href="#cb24-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">show.legend =</span> <span class="cn">FALSE</span></span>
<span id="cb24-9"><a href="#cb24-9" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="index_files/figure-html/jasmine-halftonesque-image-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>In this code, the <code>hsv()</code> function takes the hue and saturation channels from the original image, but combines them with a constant intensity value: the output is a new colour specified as a hex code that ggplot2 can display in the output. Because we have stripped out the value channel, we can reuse the halftone trick. Much like a halftone image, the image above uses the size aesthetic to represent the intensity at the corresponding pixel.</p>
</section>
</section>
<section id="intermission" class="level2">
<h2 class="anchored" data-anchor-id="intermission">Intermission</h2>
<p>Up to this point I’ve talked about image manipulation, and I hope you can see the artistic potential created when we pair image processing tools like magick with data visualisation tools like ggplot2. What I haven’t talked about is how to choose (or generate!) the images to manipulate, and I haven’t talked about how we might introduce a probabilistic component to the process. I’m not going to say much about how to choose images. The possibilities are endless. For this post I’ve used a photo I took in my garden many years ago, but the pieces in <em>Water Colours</em> series have a different origin: I dripped some food colouring into a glass of water and took some photos of the dye diffusing. Small sections were cropped out of these photos and often preprocessed in some fashion by changing the hue, saturation etc. These manipulated photos were then passed into a noise generation process, and the output produced images like this:</p>
<div class="cell" data-hash="index_cache/html/water-colour-cards-2_7a2cc16f9f0ef094873102b67d6b41b8">
<div class="cell-output-display">
<div>
<div class="row p-0 row-cols-1 row-cols-sm-2 row-cols-md-3 row-cols-lg-4" style="margin-left: -.4rem; margin-right: -.4rem; margin-top: 1rem; margin-bottom: 1rem; ">
<div class="card bg-transparent m-0 border-0 collapse.show bs4cards-blahblahblah " style="padding: .4rem ; border-width: 0; border-radius: .6rem .6rem .6rem .6rem ;">
<a href="https://djnavarro.net/series-water-colours/2000/watercolour_sys02_img48_storm-cell.jpg" style="color: inherit;">
<img src="https://djnavarro.net/series-water-colours/500/watercolour_sys02_img48_storm-cell.jpg" class="card-img-top" style="border-style:solid; border-color:inherits; border-width:1px 1px 0 1px; border-radius: .6rem .6rem 0 0 ;">
</a>
<div class="card-body justify-content-end m-0 p-0" style="visibility: visible; background-color: inherits; border-style:solid; border-color:inherits; border-width:1px; border-radius: 0 0 .6rem .6rem ;">
<a href="https://djnavarro.net/series-water-colours/2000/watercolour_sys02_img48_storm-cell.jpg">
<h5 class="card-title my-auto px-3 pt-3 pb-3 anchored">Storm Cell / Air Elemental</h5>
</a>
</div>
</div>
<div class="card bg-transparent m-0 border-0 collapse.show bs4cards-blahblahblah " style="padding: .4rem ; border-width: 0; border-radius: .6rem .6rem .6rem .6rem ;">
<a href="https://djnavarro.net/series-water-colours/2000/watercolour_sys02_img49_tonal-earth.jpg" style="color: inherit;">
<img src="https://djnavarro.net/series-water-colours/500/watercolour_sys02_img49_tonal-earth.jpg" class="card-img-top" style="border-style:solid; border-color:inherits; border-width:1px 1px 0 1px; border-radius: .6rem .6rem 0 0 ;">
</a>
<div class="card-body justify-content-end m-0 p-0" style="visibility: visible; background-color: inherits; border-style:solid; border-color:inherits; border-width:1px; border-radius: 0 0 .6rem .6rem ;">
<a href="https://djnavarro.net/series-water-colours/2000/watercolour_sys02_img49_tonal-earth.jpg">
<h5 class="card-title my-auto px-3 pt-3 pb-3 anchored">Tonal Earth</h5>
</a>
</div>
</div>
<div class="card bg-transparent m-0 border-0 collapse.show bs4cards-blahblahblah " style="padding: .4rem ; border-width: 0; border-radius: .6rem .6rem .6rem .6rem ;">
<a href="https://djnavarro.net/series-water-colours/2000/watercolour_sys02_img50_cold-front.jpg" style="color: inherit;">
<img src="https://djnavarro.net/series-water-colours/500/watercolour_sys02_img50_cold-front.jpg" class="card-img-top" style="border-style:solid; border-color:inherits; border-width:1px 1px 0 1px; border-radius: .6rem .6rem 0 0 ;">
</a>
<div class="card-body justify-content-end m-0 p-0" style="visibility: visible; background-color: inherits; border-style:solid; border-color:inherits; border-width:1px; border-radius: 0 0 .6rem .6rem ;">
<a href="https://djnavarro.net/series-water-colours/2000/watercolour_sys02_img50_cold-front.jpg">
<h5 class="card-title my-auto px-3 pt-3 pb-3 anchored">Cold Front</h5>
</a>
</div>
</div>
<div class="card bg-transparent m-0 border-0 collapse.show bs4cards-blahblahblah " style="padding: .4rem ; border-width: 0; border-radius: .6rem .6rem .6rem .6rem ;">
<a href="https://djnavarro.net/series-water-colours/2000/watercolour_sys02_img51_kintsugi-dreams.jpg" style="color: inherit;">
<img src="https://djnavarro.net/series-water-colours/500/watercolour_sys02_img51_kintsugi-dreams.jpg" class="card-img-top" style="border-style:solid; border-color:inherits; border-width:1px 1px 0 1px; border-radius: .6rem .6rem 0 0 ;">
</a>
<div class="card-body justify-content-end m-0 p-0" style="visibility: visible; background-color: inherits; border-style:solid; border-color:inherits; border-width:1px; border-radius: 0 0 .6rem .6rem ;">
<a href="https://djnavarro.net/series-water-colours/2000/watercolour_sys02_img51_kintsugi-dreams.jpg">
<h5 class="card-title my-auto px-3 pt-3 pb-3 anchored">Kintsugi Dreams</h5>
</a>
</div>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="art-from-noise-generators" class="level2">
<h2 class="anchored" data-anchor-id="art-from-noise-generators">Art from noise generators</h2>
<section id="multidimensional-noise-generation" class="level3">
<h3 class="anchored" data-anchor-id="multidimensional-noise-generation">Multidimensional noise generation</h3>
<p>How can we generate interesting noise patterns in R? As usual, there are many different ways you can do this, but my favourite method is to use the <a href="https://ambient.data-imaginist.com/">ambient</a> package that provides bindings to the <a href="https://github.com/Auburn/FastNoiseLite">FastNoise</a> C++ library. A proper description of what you can do with ambient is beyond what I can accomplish here. There are a <em>lot</em> of things you can do with a tool like this, and I’ve explored only a small subset of the possibilities in my art. Rather than make a long post even longer, what I’ll do is link to a lovely essay on <a href="https://tylerxhobbs.com/essays/2020/flow-fields">flow fields</a> and encourage you to play around yourself.</p>
<p>To give you a sense of what the possibilities are, I’ve written a <code>field()</code> function that uses the ambient package to generate noise. At its heart is <code>ambient::gen_simplex()</code>, a function that generates <a href="https://en.wikipedia.org/wiki/Simplex_noise">simplex noise</a> (examples <a href="https://ambient.data-imaginist.com/reference/noise_simplex.html">here</a>), a useful form of multidimensional noise that has applications in computer graphics. In the code below, the simplex noise is then modified by a <a href="https://ambient.data-imaginist.com/reference/billow.html">billow fractal</a> that makes it “lumpier”: that’s the job of <code>ambient::gen_billow()</code> and <code>ambient::fracture()</code>. This is then modified one last time by the <code>ambient::curl_noise()</code> function to avoid some undesirable properties of the flow fields created by simplex noise.</p>
<p>In any case, here is the code. You’ll probably need to read through the ambient documentation to understand all the moving parts here, but for our purposes the main things to note are the arguments. The <code>points</code> argument takes a data frame or tibble that contains the <code>x</code> and <code>y</code> coordinates of a set of points (e.g., something like the <code>jas</code> data!). The <code>frequency</code> argument controls the overall “scale” of the noise: does it change quickly or slowly as you move across the image? The <code>octaves</code> argument controls the amount of fractal-ness (hush, I know that’s not a word) in the image. How many times do you apply the underlying transformation?</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>field <span class="ot">&lt;-</span> <span class="cf">function</span>(points, <span class="at">frequency =</span> .<span class="dv">1</span>, <span class="at">octaves =</span> <span class="dv">1</span>) {</span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>  ambient<span class="sc">::</span><span class="fu">curl_noise</span>(</span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">generator =</span> ambient<span class="sc">::</span>fracture,</span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">fractal =</span> ambient<span class="sc">::</span>billow,</span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">noise =</span> ambient<span class="sc">::</span>gen_simplex,</span>
<span id="cb25-6"><a href="#cb25-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> points<span class="sc">$</span>x,</span>
<span id="cb25-7"><a href="#cb25-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> points<span class="sc">$</span>y,</span>
<span id="cb25-8"><a href="#cb25-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">frequency =</span> frequency,</span>
<span id="cb25-9"><a href="#cb25-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">octaves =</span> octaves,</span>
<span id="cb25-10"><a href="#cb25-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">seed =</span> <span class="dv">1</span></span>
<span id="cb25-11"><a href="#cb25-11" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb25-12"><a href="#cb25-12" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Interpreting the output of the <code>field()</code> function requires a little care. The result <em>isn’t</em> a new set of points. Rather, it is a collection of directional vectors that tell you “how fast” the x- and y-components are flowing at each of the locations specified in the <code>points</code> input. If we want to compute a new set of points (which is usually true), we need something like the <code>shift()</code> function below. It takes a set of <code>points</code> as input, computes the directional vectors at each of the locations, and then moves each point by a specified <code>amount</code>, using the flow vectors to work out how far to move and what direction to move. The result is a new data frame with the same columns and the same number of rows:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>shift <span class="ot">&lt;-</span> <span class="cf">function</span>(points, amount, ...) {</span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>  vectors <span class="ot">&lt;-</span> <span class="fu">field</span>(points, ...)</span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a>  points <span class="ot">&lt;-</span> points <span class="sc">%&gt;%</span></span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(</span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a>      <span class="at">x =</span> x <span class="sc">+</span> vectors<span class="sc">$</span>x <span class="sc">*</span> amount,</span>
<span id="cb26-6"><a href="#cb26-6" aria-hidden="true" tabindex="-1"></a>      <span class="at">y =</span> y <span class="sc">+</span> vectors<span class="sc">$</span>y <span class="sc">*</span> amount,</span>
<span id="cb26-7"><a href="#cb26-7" aria-hidden="true" tabindex="-1"></a>      <span class="at">time =</span> time <span class="sc">+</span> <span class="dv">1</span>,</span>
<span id="cb26-8"><a href="#cb26-8" aria-hidden="true" tabindex="-1"></a>      <span class="at">id =</span> id</span>
<span id="cb26-9"><a href="#cb26-9" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb26-10"><a href="#cb26-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(points)</span>
<span id="cb26-11"><a href="#cb26-11" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>It’s worth noting that the <code>shift()</code> function assumes that <code>points</code> contains an <code>id</code> column as well as the <code>x</code> and <code>y</code> columns. This will be crucial later when we want to merge the output with the <code>jas</code> data. Because the positions of each point are changing, the <code>id</code> column will be the method we use to join the two data sets. It’s also worth noting that <code>shift()</code> keeps track of time for you. It assumes that the input data contains a <code>time</code> column, and the output data contains the same column with every value incremented by one. In other words, it keeps the <code>id</code> constant so we know which point is referred to by the row, but modifies its position in <code>time</code> and space (<code>x</code> and <code>y</code>). Neat.</p>
</section>
<section id="art-from-the-noise" class="level3">
<h3 class="anchored" data-anchor-id="art-from-the-noise">Art from the noise</h3>
<p>To illustrate how this all works, I’ll start by creating a regular 50x30 grid of points:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a>points_time0 <span class="ot">&lt;-</span> <span class="fu">expand_grid</span>(<span class="at">x =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">50</span>, <span class="at">y =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">30</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">time =</span> <span class="dv">0</span>, <span class="at">id =</span> <span class="fu">row_number</span>())</span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot_themed</span>(points_time0) <span class="sc">+</span> </span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">size =</span> .<span class="dv">5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="index_files/figure-html/plain-grid-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Next, I’ll apply the <code>shift()</code> function three times in succession, and bind the results into a single tibble that contains the the data at each point in time:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a>points_time1 <span class="ot">&lt;-</span> <span class="fu">shift</span>(points_time0, <span class="at">amount =</span> <span class="dv">1</span>)</span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>points_time2 <span class="ot">&lt;-</span> <span class="fu">shift</span>(points_time1, <span class="at">amount =</span> <span class="dv">1</span>)</span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a>points_time3 <span class="ot">&lt;-</span> <span class="fu">shift</span>(points_time2, <span class="at">amount =</span> <span class="dv">1</span>)</span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true" tabindex="-1"></a>pts <span class="ot">&lt;-</span> <span class="fu">bind_rows</span>(</span>
<span id="cb28-6"><a href="#cb28-6" aria-hidden="true" tabindex="-1"></a>  points_time0, </span>
<span id="cb28-7"><a href="#cb28-7" aria-hidden="true" tabindex="-1"></a>  points_time1, </span>
<span id="cb28-8"><a href="#cb28-8" aria-hidden="true" tabindex="-1"></a>  points_time2,</span>
<span id="cb28-9"><a href="#cb28-9" aria-hidden="true" tabindex="-1"></a>  points_time3</span>
<span id="cb28-10"><a href="#cb28-10" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Then I’ll quickly write a couple of boring wrapper functions that will control how the size and transparency of the markers changes as a function of time…</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a>map_size <span class="ot">&lt;-</span> <span class="cf">function</span>(x) {</span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a>  ambient<span class="sc">::</span><span class="fu">normalise</span>(x, <span class="at">to =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">2</span>))</span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a>map_alpha <span class="ot">&lt;-</span> <span class="cf">function</span>(x) {</span>
<span id="cb29-5"><a href="#cb29-5" aria-hidden="true" tabindex="-1"></a>  ambient<span class="sc">::</span><span class="fu">normalise</span>(<span class="sc">-</span>x, <span class="at">to =</span> <span class="fu">c</span>(<span class="dv">0</span>, .<span class="dv">5</span>))</span>
<span id="cb29-6"><a href="#cb29-6" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>…and now we can create some art:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a>pts <span class="sc">%&gt;%</span> </span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot_themed</span>() <span class="sc">+</span>  </span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(</span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">mapping =</span> <span class="fu">aes</span>(</span>
<span id="cb30-5"><a href="#cb30-5" aria-hidden="true" tabindex="-1"></a>      <span class="at">size =</span> <span class="fu">map_size</span>(time), </span>
<span id="cb30-6"><a href="#cb30-6" aria-hidden="true" tabindex="-1"></a>      <span class="at">alpha =</span> <span class="fu">map_alpha</span>(time)</span>
<span id="cb30-7"><a href="#cb30-7" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb30-8"><a href="#cb30-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">show.legend =</span> <span class="cn">FALSE</span></span>
<span id="cb30-9"><a href="#cb30-9" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="index_files/figure-html/noise-stepped-image-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>So pretty!</p>
</section>
<section id="accumulating-art-with-purrr" class="level3">
<h3 class="anchored" data-anchor-id="accumulating-art-with-purrr">Accumulating art with purrr</h3>
<p>… but also so ugly. The code I used above is awfully inelegant: I’ve “iteratively” created a sequence of data frames by writing the same line of code several times. That’s almost never the right answer, especially when the code doesn’t know in advance how many times we want to <code>shift()</code> the points! To fix this I could write a loop (and contrary to folklore, there’s nothing wrong with loops in R so long as you’re careful to avoid unnecessary copying). However, I’ve become addicted to functional programming tools in the <a href="https://purrr.tidyverse.org/">purrr</a> package, so I’m going to use those rather than write a loop.</p>
<p>To solve my problem I’m going to use the <code>purrr::accumulate()</code> function, which I personally feel is an <a href="https://adv-r.hadley.nz/functionals.html#accumulate">underappreciated gem</a> in the functional programming toolkit. It does <em>precisely</em> the thing we want to do here: it takes one object (e.g., <code>points</code>) as input together with a second quantity (e.g., an <code>amount</code>), and uses the user-supplied function (e.g., <code>shift()</code>) to produce a <em>new</em> object that can, once again, be passed to the user-supplied function (yielding new <code>points</code>). It continues with this process, taking the output of the last iteration of <code>shift()</code> and using it as input to the next iteration, until it runs out of <code>amount</code> values. It is very similar to the better-known <code>purrr::reduce()</code> function, except that it doesn’t throw away the intermediate values. The <code>reduce()</code> function is only interested in the destination; <code>accumulate()</code> is a whole journey.</p>
<p>So let’s use it. The <code>iterate()</code> function below gives a convenient interface:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a>iterate <span class="ot">&lt;-</span> <span class="cf">function</span>(pts, time, step, ...) {</span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">bind_rows</span>(<span class="fu">accumulate</span>(</span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">.x =</span> <span class="fu">rep</span>(step, time), </span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">.f =</span> shift, </span>
<span id="cb31-5"><a href="#cb31-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">.init =</span> pts,</span>
<span id="cb31-6"><a href="#cb31-6" aria-hidden="true" tabindex="-1"></a>    ...</span>
<span id="cb31-7"><a href="#cb31-7" aria-hidden="true" tabindex="-1"></a>  ))</span>
<span id="cb31-8"><a href="#cb31-8" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Here’s the code to recreate the <code>pts</code> data from the previous section:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a>pts <span class="ot">&lt;-</span> points_time0 <span class="sc">%&gt;%</span> </span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">iterate</span>(<span class="at">time =</span> <span class="dv">3</span>, <span class="at">step =</span> <span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>It produces the same image, but the code is nicer!</p>
<div class="cell">
<div class="cell-output-display">
<p><img src="index_files/figure-html/noise-stepped-data-3-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
</section>
<section id="assembling-the-parts" class="level2">
<h2 class="anchored" data-anchor-id="assembling-the-parts">Assembling the parts</h2>
<section id="adding-noise-to-jasmines-coordinates" class="level3">
<h3 class="anchored" data-anchor-id="adding-noise-to-jasmines-coordinates">Adding noise to jasmines coordinates</h3>
<p>The time has come to start assembling the pieces of the jigsaw puzzle, by applying the flow fields from the previous section to the data associated with the jasmines image. The first step in doing so is to write a small <code>extract_points()</code> function that will take a data frame (like <code>jas</code>) as input, extract the positional information (<code>x</code> and <code>y</code>) and the identifier column (<code>id</code>), and add a <code>time</code> column so that we can modify positions over time:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a>extract_points <span class="ot">&lt;-</span> <span class="cf">function</span>(data) {</span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a>  data <span class="sc">%&gt;%</span> </span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(x, y, id) <span class="sc">%&gt;%</span> </span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">time =</span> <span class="dv">0</span>)</span>
<span id="cb33-5"><a href="#cb33-5" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Here’s how we can use this. The code below extracts the positional information from <code>jas</code> and then use the <code>iterate()</code> function to iteratively shift those positions along the paths traced out by a flow field:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a>pts <span class="ot">&lt;-</span> jas <span class="sc">%&gt;%</span> </span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">extract_points</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">iterate</span>(<span class="at">time =</span> <span class="dv">20</span>, <span class="at">step =</span> .<span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>The <code>pts</code> tibble doesn’t contain any of the colour information from <code>jas</code>, but it does have the “right kind” of positional information. It’s also rather pretty in its own right:</p>
<div class="cell" data-hash="index_cache/html/accumulated-noise-image_5068ecca44ec2baf3d872898cb386644">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a>map_size <span class="ot">&lt;-</span> <span class="cf">function</span>(x) {</span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a>  ambient<span class="sc">::</span><span class="fu">normalise</span>(x<span class="sc">^</span><span class="dv">2</span>, <span class="at">to =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="fl">3.5</span>))</span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb35-4"><a href="#cb35-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-5"><a href="#cb35-5" aria-hidden="true" tabindex="-1"></a>pts <span class="sc">%&gt;%</span> </span>
<span id="cb35-6"><a href="#cb35-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot_themed</span>() <span class="sc">+</span>  </span>
<span id="cb35-7"><a href="#cb35-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(</span>
<span id="cb35-8"><a href="#cb35-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">size =</span> <span class="fu">map_size</span>(time)),</span>
<span id="cb35-9"><a href="#cb35-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">alpha =</span> .<span class="dv">01</span>,</span>
<span id="cb35-10"><a href="#cb35-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">show.legend =</span> <span class="cn">FALSE</span></span>
<span id="cb35-11"><a href="#cb35-11" aria-hidden="true" tabindex="-1"></a>  ) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="index_files/figure-html/accumulated-noise-image-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="joining-the-noise-with-jasmine-colours" class="level3">
<h3 class="anchored" data-anchor-id="joining-the-noise-with-jasmine-colours">Joining the noise with jasmine colours</h3>
<p>We can now take the pixels from the jasmines image and make them “flow” across the image. To do this, we’ll need to reintroduce the colour information. We can do this using <code>full_join()</code> from the dplyr package. I’ve written a small convenience function <code>restore_points()</code> that performs the join only after removing the original <code>x</code> and <code>y</code> coordinates from the <code>jas</code> data. The reason for this is that the <code>pts</code> data now contains the positional information we need, so we want the <code>x</code> and <code>y</code> values from that data set. That’s easy enough: we drop those coordinates with <code>select()</code> and then join the two tables using only the <code>id</code> column. See? I promised it would be useful!</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a>restore_points <span class="ot">&lt;-</span> <span class="cf">function</span>(jas, pts) {</span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a>  jas <span class="sc">%&gt;%</span> </span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(<span class="sc">-</span>x, <span class="sc">-</span>y) <span class="sc">%&gt;%</span> </span>
<span id="cb36-4"><a href="#cb36-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">full_join</span>(pts, <span class="at">by =</span> <span class="st">"id"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb36-5"><a href="#cb36-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">arrange</span>(time, id) </span>
<span id="cb36-6"><a href="#cb36-6" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>The result is a tibble that looks like this:</p>
<div class="cell" data-hash="index_cache/html/noisy-jasmine-data_585be5e9ea1d37592db14356f3f63db4">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a>jas <span class="ot">&lt;-</span> <span class="fu">restore_points</span>(jas, pts)</span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a>jas</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 126,000 × 11
   shade        id   red   grn   blu    hue   sat   val     x     y  time
   &lt;chr&gt;     &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
 1 #838c70ff     1   131   140   112 0.220  0.200 0.549     1     1     0
 2 #3c3123ff     2    60    49    35 0.0933 0.417 0.235     1    10     0
 3 #503d3dff     3    80    61    61 0      0.237 0.314     1    11     0
 4 #363126ff     4    54    49    38 0.115  0.296 0.212     1    12     0
 5 #443a30ff     5    68    58    48 0.0833 0.294 0.267     1    13     0
 6 #8a6860ff     6   138   104    96 0.0317 0.304 0.541     1    14     0
 7 #665859ff     7   102    88    89 0.988  0.137 0.4       1    15     0
 8 #5a5d51ff     8    90    93    81 0.208  0.129 0.365     1    16     0
 9 #535c4cff     9    83    92    76 0.260  0.174 0.361     1    17     0
10 #944b61ff    10   148    75    97 0.950  0.493 0.580     1    18     0
# ℹ 125,990 more rows</code></pre>
</div>
</div>
<p>More importantly though, it produces images like this:</p>
<div class="cell" data-hash="index_cache/html/noisy-jasmine-image_64d40cf5e07e088f0ad9214c0743206c">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a>map_size <span class="ot">&lt;-</span> <span class="cf">function</span>(x, y) {</span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a>  ambient<span class="sc">::</span><span class="fu">normalise</span>((<span class="dv">1</span> <span class="sc">-</span> x) <span class="sc">*</span> y<span class="sc">^</span><span class="dv">2</span>, <span class="at">to =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">5</span>))</span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb39-4"><a href="#cb39-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-5"><a href="#cb39-5" aria-hidden="true" tabindex="-1"></a>jas <span class="sc">%&gt;%</span> </span>
<span id="cb39-6"><a href="#cb39-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot_themed</span>() <span class="sc">+</span>  </span>
<span id="cb39-7"><a href="#cb39-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(</span>
<span id="cb39-8"><a href="#cb39-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">mapping =</span> <span class="fu">aes</span>(</span>
<span id="cb39-9"><a href="#cb39-9" aria-hidden="true" tabindex="-1"></a>      <span class="at">colour =</span> <span class="fu">hsv</span>(hue, sat, .<span class="dv">5</span>), </span>
<span id="cb39-10"><a href="#cb39-10" aria-hidden="true" tabindex="-1"></a>      <span class="at">size =</span> <span class="fu">map_size</span>(val, time)</span>
<span id="cb39-11"><a href="#cb39-11" aria-hidden="true" tabindex="-1"></a>    ), </span>
<span id="cb39-12"><a href="#cb39-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">alpha =</span> .<span class="dv">03</span>,</span>
<span id="cb39-13"><a href="#cb39-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">show.legend =</span> <span class="cn">FALSE</span></span>
<span id="cb39-14"><a href="#cb39-14" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="index_files/figure-html/noisy-jasmine-image-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>When colouring the image, we’re using the same “halftonesque” trick from earlier. The colours vary only in hue and saturation. The intensity values are mapped to the size aesthetic, much like we did earlier, but this time around the size aesthetic is a function of two variables: it depends on <code>time</code> as well as <code>val</code>. The way I’ve set it up here is to have the points get larger as time increases, but there’s no reason we have to do it that way. There are endless ways in which you could combine the positional, temporal, and shading data to create interesting generative art. This is only one example.</p>
</section>
<section id="the-last-chapter" class="level3">
<h3 class="anchored" data-anchor-id="the-last-chapter">The last chapter</h3>
<p>At last we have the tools we need to create images in a style similar (though not identical) to those produced by the <em>Water Colours</em> system. We can import, reorganise, and separate the data:</p>
<div class="cell" data-hash="index_cache/html/jasmine-detailed-read_945802ec42602753f52e3f11bf61241a">
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a>jas <span class="ot">&lt;-</span> file <span class="sc">%&gt;%</span> </span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">import_image</span>(<span class="at">width =</span> <span class="dv">200</span>, <span class="at">height =</span> <span class="dv">120</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb40-3"><a href="#cb40-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">construct_matrix</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb40-4"><a href="#cb40-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">construct_tibble</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb40-5"><a href="#cb40-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">extract_channels</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>We can define flow fields with different properties, move the pixels through the fields, and rejoin the modified positions with the colour information</p>
<div class="cell" data-hash="index_cache/html/jasmine-detailed-data_923c83b865ab495cdae3d009b7a5dbd5">
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a>pts <span class="ot">&lt;-</span> jas <span class="sc">%&gt;%</span> </span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">extract_points</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb41-3"><a href="#cb41-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">iterate</span>(</span>
<span id="cb41-4"><a href="#cb41-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">time =</span> <span class="dv">40</span>, </span>
<span id="cb41-5"><a href="#cb41-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">step =</span> .<span class="dv">2</span>, </span>
<span id="cb41-6"><a href="#cb41-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">octaves =</span> <span class="dv">10</span>, </span>
<span id="cb41-7"><a href="#cb41-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">frequency =</span> .<span class="dv">05</span></span>
<span id="cb41-8"><a href="#cb41-8" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb41-9"><a href="#cb41-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-10"><a href="#cb41-10" aria-hidden="true" tabindex="-1"></a>jas <span class="ot">&lt;-</span> jas <span class="sc">%&gt;%</span></span>
<span id="cb41-11"><a href="#cb41-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">restore_points</span>(pts)</span>
<span id="cb41-12"><a href="#cb41-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-13"><a href="#cb41-13" aria-hidden="true" tabindex="-1"></a>jas</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 984,000 × 11
   shade        id   red   grn   blu    hue    sat   val     x     y  time
   &lt;chr&gt;     &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt;  &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
 1 #9c8178ff     1   156   129   120 0.0417 0.231  0.612     1     1     0
 2 #81b564ff     2   129   181   100 0.274  0.448  0.710     1    10     0
 3 #8b7870ff     3   139   120   112 0.0494 0.194  0.545     1   100     0
 4 #eedfdbff     4   238   223   219 0.0351 0.0798 0.933     1   101     0
 5 #c29aa3ff     5   194   154   163 0.962  0.206  0.761     1   102     0
 6 #d5e1c3ff     6   213   225   195 0.233  0.133  0.882     1   103     0
 7 #bde8beff     7   189   232   190 0.337  0.185  0.910     1   104     0
 8 #b3dfbcff     8   179   223   188 0.367  0.197  0.875     1   105     0
 9 #b2dcbdff     9   178   220   189 0.377  0.191  0.863     1   106     0
10 #b3d9bfff    10   179   217   191 0.386  0.175  0.851     1   107     0
# ℹ 983,990 more rows</code></pre>
</div>
</div>
<p>We can write customised helpers to guide how information is used:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a>map_size <span class="ot">&lt;-</span> <span class="cf">function</span>(x, y) {</span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a>  <span class="dv">12</span> <span class="sc">*</span> (<span class="dv">1</span> <span class="sc">-</span> x) <span class="sc">*</span> (<span class="fu">max</span>(y)<span class="sc">^</span><span class="dv">2</span> <span class="sc">-</span> y<span class="sc">^</span><span class="dv">2</span>) <span class="sc">/</span> y<span class="sc">^</span><span class="dv">2</span></span>
<span id="cb43-3"><a href="#cb43-3" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>And we can render the images with ggplot2:</p>
<div class="cell" data-hash="index_cache/html/jasmine-detailed-image_b631bfef230aa80e6ade5fd4a74ea900">
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a>pic <span class="ot">&lt;-</span> jas <span class="sc">%&gt;%</span> </span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot_themed</span>() <span class="sc">+</span>  </span>
<span id="cb44-3"><a href="#cb44-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(</span>
<span id="cb44-4"><a href="#cb44-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">mapping =</span> <span class="fu">aes</span>(</span>
<span id="cb44-5"><a href="#cb44-5" aria-hidden="true" tabindex="-1"></a>      <span class="at">colour =</span> shade, </span>
<span id="cb44-6"><a href="#cb44-6" aria-hidden="true" tabindex="-1"></a>      <span class="at">size =</span> <span class="fu">map_size</span>(val, time)</span>
<span id="cb44-7"><a href="#cb44-7" aria-hidden="true" tabindex="-1"></a>    ), </span>
<span id="cb44-8"><a href="#cb44-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">alpha =</span> <span class="dv">1</span>,</span>
<span id="cb44-9"><a href="#cb44-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">stroke =</span> <span class="dv">0</span>,</span>
<span id="cb44-10"><a href="#cb44-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">show.legend =</span> <span class="cn">FALSE</span></span>
<span id="cb44-11"><a href="#cb44-11" aria-hidden="true" tabindex="-1"></a>  ) </span>
<span id="cb44-12"><a href="#cb44-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-13"><a href="#cb44-13" aria-hidden="true" tabindex="-1"></a>pic</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 1 rows containing missing values (`geom_point()`).</code></pre>
</div>
<div class="cell-output-display">
<p><img src="index_files/figure-html/jasmine-detailed-image-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>The colour bleeding over the edges here is to be expected. Some of the points created with <code>geom_point()</code> are quite large, and they extend some distance beyond the boundaries of the original jasmines photograph. The result doesn’t appeal to my artistic sensibilities, so I’ll adjust the scale limits in ggplot2 so that we don’t get that strange border:</p>
<div class="cell" data-hash="index_cache/html/jasmine-cropped-image_59b5406d0b5e4e4916a266225d9ab60a">
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a>pic <span class="sc">+</span></span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">11</span>, <span class="dv">190</span>), <span class="at">expand =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">0</span>)) <span class="sc">+</span></span>
<span id="cb46-3"><a href="#cb46-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">7</span>, <span class="dv">114</span>), <span class="at">expand =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">0</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 198656 rows containing missing values (`geom_point()`).</code></pre>
</div>
<div class="cell-output-display">
<p><img src="index_files/figure-html/jasmine-cropped-image-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>The end result is something that has a qualitative similarity to the <em>Water Colours</em> pieces, but is also possessed of a style that is very much its own. This is as it should be. It may be true that “all art is theft” – as Picasso is often misquoted as saying – but a good artistic theft is no mere replication. It can also be growth, change, and reconstruction.</p>
<p>A happy ending after all.</p>
</section>
</section>
<section id="epilogue" class="level2">
<h2 class="anchored" data-anchor-id="epilogue">Epilogue</h2>
<blockquote class="blockquote">
<p>I find it so amazing when people tell me that electronic music has no soul. You can’t blame the computer. If there’s no soul in the music, it’s because nobody put it there (<a href="https://www.azquotes.com/quote/564301">Björk</a>, via <a href="https://twitter.com/TimdeSousa/status/1432898952907554822">Tim de Sousa</a>)</p>
</blockquote>
<div class="cell" data-hash="index_cache/html/water-colour-cards-3_2324dbb0a7d769505e14765f12ca0eef">
<div class="cell-output-display">
<div>
<div class="row p-0 row-cols-1 row-cols-sm-2 row-cols-md-3 row-cols-lg-4" style="margin-left: -.4rem; margin-right: -.4rem; margin-top: 1rem; margin-bottom: 1rem; ">
<div class="card bg-transparent m-0 border-0 collapse.show bs4cards-blahblahblah " style="padding: .4rem ; border-width: 0; border-radius: .6rem .6rem .6rem .6rem ;">
<a href="https://djnavarro.net/series-water-colours/2000/watercolour_sys02_img53_departure.jpg" style="color: inherit;">
<img src="https://djnavarro.net/series-water-colours/500/watercolour_sys02_img53_departure.jpg" class="card-img-top" style="border-style:solid; border-color:inherits; border-width:1px 1px 0 1px; border-radius: .6rem .6rem 0 0 ;">
</a>
<div class="card-body justify-content-end m-0 p-0" style="visibility: visible; background-color: inherits; border-style:solid; border-color:inherits; border-width:1px; border-radius: 0 0 .6rem .6rem ;">
<a href="https://djnavarro.net/series-water-colours/2000/watercolour_sys02_img53_departure.jpg">
<h5 class="card-title my-auto px-3 pt-3 pb-3 anchored">Departure</h5>
</a>
</div>
</div>
<div class="card bg-transparent m-0 border-0 collapse.show bs4cards-blahblahblah " style="padding: .4rem ; border-width: 0; border-radius: .6rem .6rem .6rem .6rem ;">
<a href="https://djnavarro.net/series-water-colours/2000/watercolour_sys02_img54_echo.jpg" style="color: inherit;">
<img src="https://djnavarro.net/series-water-colours/500/watercolour_sys02_img54_echo.jpg" class="card-img-top" style="border-style:solid; border-color:inherits; border-width:1px 1px 0 1px; border-radius: .6rem .6rem 0 0 ;">
</a>
<div class="card-body justify-content-end m-0 p-0" style="visibility: visible; background-color: inherits; border-style:solid; border-color:inherits; border-width:1px; border-radius: 0 0 .6rem .6rem ;">
<a href="https://djnavarro.net/series-water-colours/2000/watercolour_sys02_img54_echo.jpg">
<h5 class="card-title my-auto px-3 pt-3 pb-3 anchored">Echo</h5>
</a>
</div>
</div>
<div class="card bg-transparent m-0 border-0 collapse.show bs4cards-blahblahblah " style="padding: .4rem ; border-width: 0; border-radius: .6rem .6rem .6rem .6rem ;">
<a href="https://djnavarro.net/series-water-colours/2000/watercolour_sys02_img57_portal.jpg" style="color: inherit;">
<img src="https://djnavarro.net/series-water-colours/500/watercolour_sys02_img57_portal.jpg" class="card-img-top" style="border-style:solid; border-color:inherits; border-width:1px 1px 0 1px; border-radius: .6rem .6rem 0 0 ;">
</a>
<div class="card-body justify-content-end m-0 p-0" style="visibility: visible; background-color: inherits; border-style:solid; border-color:inherits; border-width:1px; border-radius: 0 0 .6rem .6rem ;">
<a href="https://djnavarro.net/series-water-colours/2000/watercolour_sys02_img57_portal.jpg">
<h5 class="card-title my-auto px-3 pt-3 pb-3 anchored">Portal</h5>
</a>
</div>
</div>
<div class="card bg-transparent m-0 border-0 collapse.show bs4cards-blahblahblah " style="padding: .4rem ; border-width: 0; border-radius: .6rem .6rem .6rem .6rem ;">
<a href="https://djnavarro.net/series-water-colours/2000/watercolour_sys02_img60_salt-stone-storm.jpg" style="color: inherit;">
<img src="https://djnavarro.net/series-water-colours/500/watercolour_sys02_img60_salt-stone-storm.jpg" class="card-img-top" style="border-style:solid; border-color:inherits; border-width:1px 1px 0 1px; border-radius: .6rem .6rem 0 0 ;">
</a>
<div class="card-body justify-content-end m-0 p-0" style="visibility: visible; background-color: inherits; border-style:solid; border-color:inherits; border-width:1px; border-radius: 0 0 .6rem .6rem ;">
<a href="https://djnavarro.net/series-water-colours/2000/watercolour_sys02_img60_salt-stone-storm.jpg">
<h5 class="card-title my-auto px-3 pt-3 pb-3 anchored">Gods of Salt, Stone, and Storm</h5>
</a>
</div>
</div>
<div class="card bg-transparent m-0 border-0 collapse.show bs4cards-blahblahblah " style="padding: .4rem ; border-width: 0; border-radius: .6rem .6rem .6rem .6rem ;">
<a href="https://djnavarro.net/series-water-colours/2000/watercolour_sys02_img61_amanecer-de-invierno.jpg" style="color: inherit;">
<img src="https://djnavarro.net/series-water-colours/500/watercolour_sys02_img61_amanecer-de-invierno.jpg" class="card-img-top" style="border-style:solid; border-color:inherits; border-width:1px 1px 0 1px; border-radius: .6rem .6rem 0 0 ;">
</a>
<div class="card-body justify-content-end m-0 p-0" style="visibility: visible; background-color: inherits; border-style:solid; border-color:inherits; border-width:1px; border-radius: 0 0 .6rem .6rem ;">
<a href="https://djnavarro.net/series-water-colours/2000/watercolour_sys02_img61_amanecer-de-invierno.jpg">
<h5 class="card-title my-auto px-3 pt-3 pb-3 anchored">El Último Amanecer de Invierno</h5>
</a>
</div>
</div>
<div class="card bg-transparent m-0 border-0 collapse.show bs4cards-blahblahblah " style="padding: .4rem ; border-width: 0; border-radius: .6rem .6rem .6rem .6rem ;">
<a href="https://djnavarro.net/series-water-colours/2000/watercolour_sys02_img65_plume.jpg" style="color: inherit;">
<img src="https://djnavarro.net/series-water-colours/500/watercolour_sys02_img65_plume.jpg" class="card-img-top" style="border-style:solid; border-color:inherits; border-width:1px 1px 0 1px; border-radius: .6rem .6rem 0 0 ;">
</a>
<div class="card-body justify-content-end m-0 p-0" style="visibility: visible; background-color: inherits; border-style:solid; border-color:inherits; border-width:1px; border-radius: 0 0 .6rem .6rem ;">
<a href="https://djnavarro.net/series-water-colours/2000/watercolour_sys02_img65_plume.jpg">
<h5 class="card-title my-auto px-3 pt-3 pb-3 anchored">Plume</h5>
</a>
</div>
</div>
<div class="card bg-transparent m-0 border-0 collapse.show bs4cards-blahblahblah " style="padding: .4rem ; border-width: 0; border-radius: .6rem .6rem .6rem .6rem ;">
<a href="https://djnavarro.net/series-water-colours/2000/watercolour_sys02_img67_woodland-spirits.jpg" style="color: inherit;">
<img src="https://djnavarro.net/series-water-colours/500/watercolour_sys02_img67_woodland-spirits.jpg" class="card-img-top" style="border-style:solid; border-color:inherits; border-width:1px 1px 0 1px; border-radius: .6rem .6rem 0 0 ;">
</a>
<div class="card-body justify-content-end m-0 p-0" style="visibility: visible; background-color: inherits; border-style:solid; border-color:inherits; border-width:1px; border-radius: 0 0 .6rem .6rem ;">
<a href="https://djnavarro.net/series-water-colours/2000/watercolour_sys02_img67_woodland-spirits.jpg">
<h5 class="card-title my-auto px-3 pt-3 pb-3 anchored">Woodland Spirits</h5>
</a>
</div>
</div>
<div class="card bg-transparent m-0 border-0 collapse.show bs4cards-blahblahblah " style="padding: .4rem ; border-width: 0; border-radius: .6rem .6rem .6rem .6rem ;">
<a href="https://djnavarro.net/series-water-colours/2000/watercolour_sys02_img68_below-the-horizon.jpg" style="color: inherit;">
<img src="https://djnavarro.net/series-water-colours/500/watercolour_sys02_img68_below-the-horizon.jpg" class="card-img-top" style="border-style:solid; border-color:inherits; border-width:1px 1px 0 1px; border-radius: .6rem .6rem 0 0 ;">
</a>
<div class="card-body justify-content-end m-0 p-0" style="visibility: visible; background-color: inherits; border-style:solid; border-color:inherits; border-width:1px; border-radius: 0 0 .6rem .6rem ;">
<a href="https://djnavarro.net/series-water-colours/2000/watercolour_sys02_img68_below-the-horizon.jpg">
<h5 class="card-title my-auto px-3 pt-3 pb-3 anchored">Below the Horizon</h5>
</a>
</div>
</div>
</div>
</div>
</div>
</div>
<!--------------- appendices go here ----------------->


</section>

<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents"><h2 class="anchored quarto-appendix-heading">Reuse</h2><div id="quarto-reuse" class="quarto-appendix-contents"><div><a rel="license" href="https://creativecommons.org/licenses/by/4.0/">https://creativecommons.org/licenses/by/4.0/</a></div></div></section><section class="quarto-appendix-contents"><h2 class="anchored quarto-appendix-heading">Citation</h2><div><div class="quarto-appendix-secondary-label">BibTeX citation:</div><pre class="sourceCode code-with-copy quarto-appendix-bibtex"><code class="sourceCode bibtex">@online{navarro2021,
  author = {Navarro, Danielle},
  title = {Art, Jasmines, and the Water Colours},
  date = {2021-09-07},
  url = {https://blog.djnavarro.net/water-colours},
  langid = {en}
}
</code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre><div class="quarto-appendix-secondary-label">For attribution, please cite this work as:</div><div id="ref-navarro2021" class="csl-entry quarto-appendix-citeas" role="listitem">
Navarro, Danielle. 2021. <span>“Art, Jasmines, and the Water
Colours.”</span> September 7, 2021. <a href="https://blog.djnavarro.net/water-colours">https://blog.djnavarro.net/water-colours</a>.
</div></div></section></div></main> <!-- /main -->
<!-- plausible -->
<script async="" defer="" data-domain="blog.djnavarro.net" src="https://plausible.io/js/plausible.js"></script>
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
      &nbsp;
    </div>   
    <div class="nav-footer-center">
      <ul class="footer-items list-unstyled">
    <li class="nav-item">
    <a class="nav-link" href="https://blog.djnavarro.net">blog.djnavarro.net</a>
  </li>  
</ul>
    </div>
    <div class="nav-footer-right">
      &nbsp;
    </div>
  </div>
</footer>



</body></html>